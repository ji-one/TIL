### 변수란?

메모리 주소를 통해 값에 직접 접근하는 것은 오류를 발생시킬 위험이 크다. 따라서 자바스크립트는 개발자의 직접적인 메모리 제어를 허용하지 않는다.

직접적인 메모리 제어를 허용하더라도, **값이 저장될 메모리 주소는 코드가 실행될 때 메모리 상황에 따라 임의로 결정된다.** 즉 동일한 컴퓨터에서 동일한 코드를 실행해도 코드가 실행될 때마다 값이 저장되는 메모리 주소는 변경된다. 따라서 이러한 방식을 통한 값의 접근은 올바른 방법이 아니다.

`변수`를 통해 안전하게 값에 접근할 수 있다. 프로그래밍 언어는 기억하고 싶은 값을 메모리에 저장하고 저장된 값을 읽어서 재사용하기 위해 `변수` 를 사용한다. `변수`는 **하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름** 이다. 즉 값의 위치를 가리키는 상징적인 이름이다. 변수는 컴파일러 또는 인터프리터에 의해 값이 저장된 메모리 공간의 주소로 치환되어 실행된다. 

변수에 값을 저장하는 것은 `할당`, 변수에 저장된 값을 읽는 것을 `참조`라 한다. 변수 이름을 통해 `참조` 를 요청하면 자바스크립트 엔진이 변수 이름과 매핑된 메모리 주소를 통한 메모리 공간에 접근해서 저장된 값을 반환한다. 

- 변수 이름 짓는 것은 매우 중요하다 !! (넘 어렵다 이거😈)

<br/>

### 식별자

`식별자`는 값이 저장되어 있는 메모리 주소와 매핑을 맺고 이 매핑 정보 또한 메모리에 저장되어야 한다. 즉 값이 아니라 메모리 주소를 기억하고 있으며 메모리 주소에 붙인 이름이라 할 수 있다. 식별자는 변수 이름에만 국한해서 사용하는 것이 아닌 메모리 상에 존재하는 어떤 값을 식별할 수 있는 이름은 모두 `식별자`라고 부른다. (ex. 함수, 클래스 등) 식별자는 `선언`에 의해 자바스크립트 엔진에게 존재를 알린다. 모든 식별자는 `실행 컨텍스트`에 등록된다.

- `실행 컨텍스트`
  - 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역

<br/>

 ### 변수 선언

값을 저장하기 위한 메모리 공간을 확보하고 변수 이름과 메모리 공간의 주소를 연결해서 값을 저장할 수 있게 준비하는 것이다. 이렇게 확보된 공간은 해제되기 전까지 누구도 이 공간을 사용할 수 없다. 변수를 선언할 때는 `var`, `let`, `const` 키워드를 사용한다. 

```javascript
var name; // 변수 선언. 값을 할당하지 않아도 자바스크립트 엔젠에 의해 undefined라는 값이 할당
```

var 키워드는 선언 단계와 초기화 단계가 동시에 진행된다. 

- `선언 단계`
  - 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알림
- `초기화 단계`
  - 값을 저장하기 위한 메모리 공간 확보하고 암묵적으로 `undefined`를 할당

<br/>

### 호이스팅

```javascript
console.log(name); // undefined
var name;
```

위의 코드에서 변수 선언문보다 참조 코드가 앞서 있다. 자바스크립트 코드는 순차적으로 실행되므로 `console.log(name)`을 실행하면 참조 에러가 발생해야 한다. 하지만 `undefined`가 출력된다. 왜냐하면 **변수 선언이 런타임(소스코드가 순차적으로 실행되는 시점)이 아니라 그 이전 단계에서 먼저 실행**되기 때문이다. 

**자바스크립트 엔진은 소스코드를 한 줄씩 순차적으로 실행하기 전에 코드의 `평가 과정`을 거친다.** 이때, 자바스크립트 엔진은 변수 선언을 포함한 모든 선언문(변수, 함수 선언문 등)을 소스코드에서 먼저 실행한다. *(let, const는 아닌거 같은데 ....? 아 얘네는 undefined로 초기화가 안되어서 그런건가 TODO 알아보자)* 이러한 평가 과정이 끝나면 이를 제외한 코드를 순차적으로 한 줄씩 실행한다. 

이처럼 **변수 선언문이 코드의 가장 위로 끌어 올려진 것처럼 동작하는 것을 `변수 호이스팅`** 이라 한다.

<br/>

### 값의 할당

변수 선언은 런타임 이전에 실행되지만 `값의 할당`은 소스코드가 순차적으로 실행되는 시점인 `런타임`에 실행된다. 

```
console.log(name); // undefined
var name = "jiwon";
console.log(name); // jiwon
```

변수 선언과 값 할당을 위처럼 한 문장으로 표현해도 자바스크립트 엔진은 2개의 문으로 나누어 실행한다. 따라서 처음에 `undefined`가 출력된다. 변수에 값을 할당할 때는 이전에 undefined가 저장되어 있던 메모리 공간을 지우고 새롭게 값을 저장하는 것이 아닌, 새로운 메모리 공간을 확보해서 그곳에 값을 저장한다.

<br/>

### 값의 재할당
`상수`는 값의 재할당이 불가능해서 저장된 값을 변경할 수 없다. 이에 반해 `변수`는 값의 재할당이 가능하다. 값을 재할당하면 새로운 메모리 공간을 확보하고 그 메모리 공간에 값을 저장한다. 이렇게 되면 이전의 메모리 공간은 어떤 식별자와도 연결되어 있지 않다. 즉 아무도 사용하지 않는 다는 뜻이며 이러한 불필요한 값들은 `가비지 콜렉터`에 의해 메모리에서 자동 해제된다.

- `가비지 콜렉터`
  - 애플리케이션에 할당한 메모리 공간을 주기적으로 검사해서 더 이상 사용하지 않는(어떤 식별자도 참조하지 않는) 메모리 공간을 해제하는 기능
  - 자바스크립트는 가비지 콜렉터를 내장하고 있는 매니지드 언어로 이를 통해 메모리 누수를 방지한다.